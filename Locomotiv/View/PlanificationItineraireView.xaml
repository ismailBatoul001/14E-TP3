<UserControl x:Class="Locomotiv.View.PlanificationItineraireView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             mc:Ignorable="d" 
             d:DesignHeight="600" d:DesignWidth="900">
    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <Grid Margin="20" Background="White">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <TextBlock Grid.Row="0" 
                       Text="Planification d'itinéraire" 
                       FontSize="24" 
                       FontWeight="Bold" 
                       Margin="0,0,0,20"/>

            <Grid Grid.Row="1">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="20"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <Border Grid.Column="0" 
                        BorderBrush="LightGray" 
                        BorderThickness="1" 
                        Padding="15"
                        CornerRadius="5">
                    <StackPanel>
                        <TextBlock Text="Configuration" 
                                   FontSize="18" 
                                   FontWeight="Bold" 
                                   Margin="0,0,0,15"/>

                        <TextBlock Text="Train:" FontWeight="SemiBold" Margin="0,5,0,2"/>
                        <ComboBox ItemsSource="{Binding Trains}"
                                  SelectedItem="{Binding TrainSelectionne}"
                                  DisplayMemberPath="Numero"
                                  Padding="5"
                                  Margin="0,0,0,10"/>

                        <TextBlock Text="Station de départ:" FontWeight="SemiBold" Margin="0,5,0,2"/>
                        <ComboBox ItemsSource="{Binding Stations}"
                                  SelectedItem="{Binding StationDepart}"
                                  DisplayMemberPath="Nom"
                                  Padding="5"
                                  Margin="0,0,0,10"/>

                        <TextBlock Text="Station d'arrivée:" FontWeight="SemiBold" Margin="0,5,0,2"/>
                        <ComboBox ItemsSource="{Binding Stations}"
                                  SelectedItem="{Binding StationArrivee}"
                                  DisplayMemberPath="Nom"
                                  Padding="5"
                                  Margin="0,0,0,15"/>

                        <Separator Margin="0,10"/>

                        <TextBlock Text="Arrêts intermédiaires" 
                                   FontSize="16" 
                                   FontWeight="Bold" 
                                   Margin="0,10,0,10"/>

                        <TextBlock Text="Stations:" FontWeight="SemiBold" Margin="0,5,0,2"/>
                        <ListBox ItemsSource="{Binding Stations}"
                                 SelectedItem="{Binding ElementSelectionne}"
                                 DisplayMemberPath="Nom"
                                 Height="100"
                                 Margin="0,0,0,5"/>

                        <TextBlock Text="Points d'intérêt:" FontWeight="SemiBold" Margin="0,10,0,2"/>
                        <ListBox ItemsSource="{Binding PointsInteret}"
                                 SelectedItem="{Binding ElementSelectionne}"
                                 DisplayMemberPath="Nom"
                                 Height="100"
                                 Margin="0,0,0,10"/>

                        <Button Content="Ajouter à l'itinéraire"
                                Command="{Binding AjouterArretCommand}"
                                Padding="10,5"
                                Margin="0,0,0,15"/>

                        <TextBlock Text="Arrêts de l'itinéraire:" 
                                   FontWeight="SemiBold" 
                                   Margin="0,10,0,5"/>

                        <ListBox ItemsSource="{Binding ArretsSelectionnes}"
                                 SelectedItem="{Binding ElementSelectionne}"
                                 Height="120"
                                 Margin="0,0,0,10">
                            <ListBox.ItemTemplate>
                                <DataTemplate>
                                    <TextBlock>
                                        <Run Text="{Binding Nom}" FontWeight="Bold"/>
                                    </TextBlock>
                                </DataTemplate>
                            </ListBox.ItemTemplate>
                        </ListBox>

                        <Button Content="Retirer l'arrêt"
                                Command="{Binding RetirerArretCommand}"
                                Padding="10,5"
                                Background="#E74C3C"
                                Foreground="White"
                                Margin="0,0,0,15"/>

                        <TextBlock Text="{Binding ErrorMessages}"
                                   Foreground="Red"
                                   TextWrapping="Wrap"
                                   Margin="0,10,0,10"/>

                        <Button Content="Créer l'itinéraire"
                                Command="{Binding CreerItineraireCommand}"
                                Padding="15,8"
                                FontSize="14"
                                FontWeight="Bold"
                                Background="#27AE60"
                                Foreground="White"
                                Margin="0,5,0,5"/>

                        <Button Content="Démarrer le train"
                                Command="{Binding DemarrerItineraireCommand}"
                                Padding="15,8"
                                FontSize="14"
                                FontWeight="Bold"
                                Background="#3498DB"
                                Foreground="White"/>
                    </StackPanel>
                </Border>

                <Border Grid.Column="2" 
                        BorderBrush="LightGray" 
                        BorderThickness="1" 
                        Padding="15"
                        CornerRadius="5">
                    <StackPanel>

                        <TextBlock Text="Instructions" 
                                   FontSize="16" 
                                   FontWeight="Bold" 
                                   Margin="0,15,0,10"/>

                        <TextBlock TextWrapping="Wrap" Margin="0,5">
                            <Run Text="1. Sélectionnez un train disponible"/>
                            <LineBreak/>
                            <Run Text="2. Choisissez les stations de départ/arrivée"/>
                            <LineBreak/>
                            <Run Text="3. Ajoutez des arrêts (optionnel)"/>
                            <LineBreak/>
                            <Run Text="4. Créez l'itinéraire"/>
                            <LineBreak/>
                            <Run Text="5. Démarrez le train"/>
                            <LineBreak/>
                            <Run Text="6. Allez sur la carte pour voir le train"/>
                        </TextBlock>
                    </StackPanel>
                </Border>
            </Grid>
        </Grid>
    </ScrollViewer>
</UserControl>